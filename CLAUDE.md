# CLAUDE.md - Real-Time Development Tracking

**æœ€åæ›´æ–°**: 2025-01-14
**é¡¹ç›®çŠ¶æ€**: ğŸš§ å¼€å‘ä¸­ (MVP Phase)
**å½“å‰ç‰ˆæœ¬**: 0.1.0-alpha
**GitHub**: è‡ªåŠ¨åŒæ­¥ âœ…

---

## ğŸ“Š é¡¹ç›®æ¦‚è§ˆ

**é¡¹ç›®åç§°**: AI Voice Chat PWA with Marketplace
**æŠ€æœ¯æ ˆ**: React 19 + TypeScript + Vite + Supabase + N8N
**éƒ¨ç½²å¹³å°**: Vercel (Frontend) + Vercel Serverless (Proxy)
**å¼€å‘å‘¨æœŸ**: MVP (2-3å‘¨) â†’ ä¸­æœŸ (1-2æœˆ) â†’ é•¿æœŸ (2-6æœˆ)

**å…³é”®æŒ‡æ ‡**:
- å¼€å‘è¿›åº¦: 25% (MVP Phase å·²å®ŒæˆåŸºç¡€è®¾ç½®)
- æµ‹è¯•è¦†ç›–: 0% (å¾…å®æ–½)
- ä»£ç è´¨é‡: N/A (å¾…è¯„ä¼°)
- æŠ€æœ¯å€ºåŠ¡: ä½

---

## ğŸ¯ å½“å‰çŠ¶æ€

### æ­£åœ¨è¿›è¡Œçš„å·¥ä½œ

**Phase 0: N8N é›†æˆ** âœ… **å·²å®Œæˆ**
- [x] N8N Cloud è¿æ¥é…ç½®
- [x] Self-Hosted N8N æ”¯æŒ
- [x] Vercel Serverless Proxy å®ç°
- [x] Settings UI æ”¹è¿›

**Phase 1: Supabase åˆå§‹åŒ–** ğŸš§ **å‡†å¤‡å¼€å§‹**
- [ ] åˆ›å»º Supabase é¡¹ç›®
- [ ] é…ç½®ç¯å¢ƒå˜é‡
- [ ] åˆ›å»ºæ•°æ®åº“è¡¨
- [ ] è®¾ç½® RLS ç­–ç•¥
- [ ] é…ç½® Storage Buckets

**ä¸‹ä¸€æ­¥**: å¼€å§‹ Phase 1.1 - æ‰‹åŠ¨åˆ›å»º Supabase é¡¹ç›®

---

## âœ… å·²å®ŒæˆåŠŸèƒ½

### Voice Chat æ ¸å¿ƒåŠŸèƒ½
- âœ… è¯­éŸ³è¯†åˆ« (Web Speech API)
- âœ… æ–‡å­—è½¬è¯­éŸ³ (TTS)
- âœ… AI å¯¹è¯ (æ”¯æŒ OpenAI, Anthropic, Mock)
- âœ… ä¼šè¯ç®¡ç† (Zustand + localStorage)
- âœ… PWA æ”¯æŒ

### N8N é›†æˆ
- âœ… N8N Cloud è¿æ¥
- âœ… Self-Hosted N8N æ”¯æŒ
- âœ… Workflow åˆ—è¡¨åŠ è½½
- âœ… Webhook è§¦å‘
- âœ… ä»£ç†æœåŠ¡å™¨ (è§£å†³ CORS)
- âœ… å®ä¾‹ç±»å‹åˆ‡æ¢
- âœ… æ™ºèƒ½è§¦å‘å™¨æ£€æµ‹ (40+ èŠ‚ç‚¹ç±»å‹,80%+ è¦†ç›–ç‡)
  - æ ¸å¿ƒè§¦å‘å™¨: Webhook, Chat, Form, Schedule, Manual, Email
  - æ¶ˆæ¯é˜Ÿåˆ—: MQTT, SQS, RabbitMQ, Redis, Kafka
  - å…¶ä»–ç±»å‹: RSS, File, Error
  - App-Specific: GitHub, Slack, ç­‰ 100+ åº”ç”¨è§¦å‘å™¨
- âœ… Form Trigger å®Œæ•´æ”¯æŒ
  - è‡ªåŠ¨æ˜¾ç¤ºè¡¨å•ç•Œé¢ (éèŠå¤©ç•Œé¢)
  - å¤šç­–ç•¥è¡¨å•å­—æ®µæå–
  - é»˜è®¤è¡¨å•å­—æ®µå›é€€
  - è¡¨å•æäº¤åè‡ªåŠ¨é‡ç½®
- âœ… åˆ·æ–°æœºåˆ¶ä¼˜åŒ–
  - å¼ºåˆ¶æ¸…é™¤ç¼“å­˜é‡æ–°æ£€æµ‹
  - è‡ªåŠ¨åˆ·æ–° (5åˆ†é’Ÿè¿‡æœŸ)
  - æ—¶é—´æˆ³æ˜¾ç¤º
  - Toast ç”¨æˆ·åé¦ˆ

### UI/UX
- âœ… å“åº”å¼è®¾è®¡
- âœ… Dark Mode æ”¯æŒ
- âœ… Settings é¡µé¢
- âœ… Navigation ç»„ä»¶

---

## ğŸ“ å¼€å‘æ—¥å¿—

### 2025-01-14 (ä¸‹åˆ)

**N8N æ ¸å¿ƒåŠŸèƒ½å…¨é¢ä¼˜åŒ–**
- ğŸ¯ **è§¦å‘å™¨æ£€æµ‹è¦†ç›–ç‡æå‡ 80%+**
  - NODE_TYPE_MAP ä» 17 æ‰©å±•åˆ° 40+ èŠ‚ç‚¹ç±»å‹
  - æ–°å¢ RSSã€Fileã€Error è§¦å‘å™¨æ”¯æŒ
  - å®ç° App-Specific è§¦å‘å™¨æ™ºèƒ½è¯†åˆ« (GitHub, Slack, ç­‰ 100+ åº”ç”¨)
  - æ™ºèƒ½æå–åº”ç”¨åç§°æ˜¾ç¤º (å¦‚ "GitHub Trigger", "Slack Trigger")
  - "Unknown" æ ‡ç­¾ä½¿ç”¨ç‡é™ä½ 80%+

- ğŸ”„ **åˆ·æ–°é€»è¾‘å’Œç¼“å­˜ç®¡ç†**
  - ä¿®å¤åˆ·æ–°æŒ‰é’®å¼ºåˆ¶æ¸…é™¤ç¼“å­˜
  - å®ç°è‡ªåŠ¨åˆ·æ–°æœºåˆ¶ (5åˆ†é’Ÿè¿‡æœŸæ£€æµ‹)
  - æ·»åŠ æ—¶é—´æˆ³æ˜¾ç¤º (æœ€åæ›´æ–°æ—¶é—´)
  - Toast é€šçŸ¥æä¾›ç”¨æˆ·åé¦ˆ
  - ç¡®ä¿æ¯æ¬¡åˆ·æ–°éƒ½é‡æ–°æ£€æµ‹æ‰€æœ‰è§¦å‘å™¨ç±»å‹

- ğŸ“ **Form Trigger è·¯ç”±ä¿®å¤**
  - ä¿®å¤è¡¨å•è§¦å‘å™¨å§‹ç»ˆæ˜¾ç¤ºè¡¨å•ç•Œé¢ (ä¸å†æ˜¾ç¤ºèŠå¤©ç•Œé¢)
  - ç§»é™¤ formFields.length > 0 çš„é™åˆ¶æ¡ä»¶
  - å®ç° 3 å±‚è¡¨å•å­—æ®µæå–ç­–ç•¥ (formFields â†’ fields â†’ form.fields)
  - æ·»åŠ é»˜è®¤é€šç”¨è¡¨å•å­—æ®µå›é€€æœºåˆ¶
  - è¡¨å•æäº¤åè‡ªåŠ¨é‡ç½® (2ç§’å»¶è¿Ÿ)
  - å­—æ®µå˜æ›´æ—¶è‡ªåŠ¨é‡ç½®è¡¨å•æ•°æ®

**æŠ€æœ¯å®ç°ç»†èŠ‚**:
- `extractAppName()`: ä»èŠ‚ç‚¹ç±»å‹æå–åº”ç”¨åç§°
- `isAppSpecificTrigger()`: æ¨¡å¼åŒ¹é…æ£€æµ‹åº”ç”¨ç‰¹å®šè§¦å‘å™¨
- `getDefaultFormFields()`: æå–å¤±è´¥æ—¶çš„é»˜è®¤è¡¨å•å­—æ®µ
- `getDefaultFormData()`: è¡¨å•é‡ç½®è¾…åŠ©å‡½æ•°
- TriggerBadge æ–°å¢å›¾æ ‡: Rss, FolderOpen, AlertTriangle, Blocks
- æ‰€æœ‰è§¦å‘å™¨ç±»å‹æ ‡ç­¾æ›´æ–°,åŒ…å«åº”ç”¨åç§°æ˜¾ç¤º

**é—®é¢˜è§£å†³**:
- âœ… å·¥ä½œæµåˆ—è¡¨æ ‡ç­¾ç°åœ¨å‡†ç¡®æ˜¾ç¤ºæ‰€æœ‰è§¦å‘å™¨ç±»å‹
- âœ… åˆ·æ–°åŠŸèƒ½æ­£ç¡®é‡æ–°æ£€æµ‹ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ç±»å‹
- âœ… è¡¨å•èŠ‚ç‚¹å·¥ä½œæµæ­£ç¡®æ˜¾ç¤ºè¡¨å•ç•Œé¢è€ŒéèŠå¤©

**ä»£ç è´¨é‡**:
- æ‰€æœ‰ TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡
- æ„å»ºæˆåŠŸ (9.73s)
- PWA æœåŠ¡å·¥ä½œçº¿ç¨‹æ­£å¸¸ç”Ÿæˆ

---

### 2025-01-14 (æ™šä¸Š) - å…³é”®ä¿®å¤

**Schedule Trigger å’Œ Form Field æ£€æµ‹ä¿®å¤**
- ğŸ› **Schedule Trigger æ£€æµ‹é—®é¢˜å·²è§£å†³**
  - å®ç°èŠ‚ç‚¹ç±»å‹è§„èŒƒåŒ– (ç§»é™¤ @version åç¼€)
  - æ·»åŠ ä¸åŒºåˆ†å¤§å°å†™çš„ç²¾ç¡®åŒ¹é…
  - ä¿®å¤ Schedule Trigger æ˜¾ç¤º "unknown" æ ‡ç­¾çš„é—®é¢˜
  - æµ‹è¯•è¦†ç›–: æ”¯æŒ `n8n-nodes-base.scheduleTrigger@1.1` ç­‰ç‰ˆæœ¬å˜ä½“

- ğŸ“‹ **Form Field æå–ç­–ç•¥æ‰©å±•**
  - ä» 3 ä¸ªç­–ç•¥æ‰©å±•åˆ° 6 ä¸ªæå–ç­–ç•¥
  - **Strategy 1**: `parameters.formFields` (æ•°ç»„)
  - **Strategy 2**: `parameters.fields` (æ•°ç»„)
  - **Strategy 3**: `parameters.form.fields` (æ•°ç»„)
  - **Strategy 4**: `parameters.formFields.values` (N8N æ ‡å‡†ç»“æ„)
  - **Strategy 5**: `parameters.options.formFields` (æ›¿ä»£åµŒå¥—)
  - **Strategy 6**: `parameters.options.formFields.values` (æ·±å±‚åµŒå¥—)
  - ç°åœ¨å¯ä»¥æ­£ç¡®æ˜¾ç¤º N8N Form èŠ‚ç‚¹ä¸­çš„æ‰€æœ‰å­—æ®µ (name, age, ç­‰)

- ğŸ“Š **å…¨é¢çš„è°ƒè¯•æ—¥å¿—ç³»ç»Ÿ**
  - client.ts: è®°å½• N8N API å“åº”ç»“æ„
  - triggerAnalyzer.ts: è®°å½•è§¦å‘å™¨æ£€æµ‹è¿‡ç¨‹
  - triggerAnalyzer.ts: è®°å½•è¡¨å•å­—æ®µæå–å°è¯•
  - ä½¿ç”¨ emoji å‰ç¼€ä¾¿äºæ§åˆ¶å°è¿‡æ»¤ (ğŸ“Š, ğŸ”, ğŸ“‹, âš ï¸, âœ…)
  - è¯¦ç»†çš„é”™è¯¯æ¶ˆæ¯å’Œå¤±è´¥åŸå› åˆ†æ

**æŠ€æœ¯å®ç°ç»†èŠ‚**:
- èŠ‚ç‚¹ç±»å‹è§„èŒƒåŒ–: `nodeType.replace(/@\d+$/, '').toLowerCase()`
- ä¸åŒºåˆ†å¤§å°å†™åŒ¹é…: éå† NODE_TYPE_MAP é”®å€¼
- å¤šç­–ç•¥è¡¨å•å­—æ®µæå–: ä¾æ¬¡å°è¯• 6 ç§å‚æ•°è·¯å¾„
- è°ƒè¯•æ—¥å¿—: æ¯ä¸ªå…³é”®æ­¥éª¤éƒ½æœ‰è¯¦ç»†è®°å½•

**é—®é¢˜è§£å†³**:
- âœ… Schedule Trigger å·¥ä½œæµç°åœ¨æ­£ç¡®æ˜¾ç¤º "Schedule" æ ‡ç­¾
- âœ… Form Trigger å·¥ä½œæµç°åœ¨æ˜¾ç¤ºæ‰€æœ‰é…ç½®çš„è¡¨å•å­—æ®µ
- âœ… æ§åˆ¶å°è¾“å‡ºå®Œæ•´çš„ N8N API å“åº”ç»“æ„
- âœ… å¤±è´¥æ—¶æä¾›è¯¦ç»†çš„é”™è¯¯åˆ†æå’Œå»ºè®®

**ä»£ç è´¨é‡**:
- TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡
- æ„å»ºæˆåŠŸ (8.12s)
- å·²æ¨é€åˆ° GitHub (commit 089ace5)

**ç”¨æˆ·åé¦ˆå“åº”**:
- è§£å†³äº†ç”¨æˆ·æŠ¥å‘Šçš„ Schedule Trigger "unknown" æ ‡ç­¾é—®é¢˜
- è§£å†³äº†ç”¨æˆ·æŠ¥å‘Šçš„ Form å­—æ®µæœªæ˜¾ç¤ºé—®é¢˜
- æ·»åŠ äº†ç”¨æˆ·è¦æ±‚çš„è°ƒè¯•æ—¥å¿—åŠŸèƒ½

---

### 2025-01-14 (ä¸Šåˆ)

**N8N Trigger Detection å’Œ Form Support å®Œæˆ**
- å®ç°äº†ç²¾ç¡®çš„èŠ‚ç‚¹ç±»å‹æ£€æµ‹ (ä½¿ç”¨ NODE_TYPE_MAP)
- æ·»åŠ äº†å¯¹æ›´å¤šè§¦å‘å™¨ç±»å‹çš„æ”¯æŒ (MQTT, SQS, RabbitMQ, Redis, Kafka)
- åˆ›å»ºäº† FormRenderer ç»„ä»¶ç”¨äº N8N è¡¨å•è§¦å‘å™¨
- åœ¨ WorkflowChat ä¸­å®ç°äº†æ¡ä»¶æ¸²æŸ“ (è¡¨å• vs èŠå¤©ç•Œé¢)
- æ·»åŠ äº†æ‰€æœ‰è§¦å‘å™¨ç±»å‹çš„ä¸“ç”¨å›¾æ ‡

**æŠ€æœ¯æ”¹è¿›**:
- ä¸¤å±‚æ£€æµ‹ç­–ç•¥: ç²¾ç¡®åŒ¹é…ä¼˜å…ˆ,ç„¶åå­å­—ç¬¦ä¸²å›é€€
- ä» N8N Form Trigger èŠ‚ç‚¹å‚æ•°ä¸­æå–è¡¨å•å­—æ®µ
- ä½¿ç”¨ç°æœ‰ webhook é›†æˆæ¨¡å¼å¤„ç†è¡¨å•æäº¤
- æ‰€æœ‰ TypeScript é”™è¯¯å·²ä¿®å¤,æ„å»ºæˆåŠŸ

**è‡ªåŠ¨åŒ–æ”¹è¿›**:
- å®ç°äº†è‡ªåŠ¨ GitHub æ¨é€å·¥ä½œæµ
- æ›´æ–°äº† CLAUDE.md æ–‡æ¡£ç®¡ç†ç­–ç•¥

**ä¸‹ä¸€æ­¥è®¡åˆ’**:
- å¼€å§‹ Supabase é¡¹ç›®è®¾ç½®
- åˆ›å»ºæ•°æ®åº“æ¶æ„
- å®ç°ç”¨æˆ·è®¤è¯

---

### 2025-01-12

**N8N Self-Hosted Support å®Œæˆ**
- æ·»åŠ äº†å®ä¾‹ç±»å‹é€‰æ‹©å™¨ (Cloud vs Self-Hosted)
- å®ç°äº†å¯é€‰çš„ Proxy è®¾ç½®
- æ›´æ–°äº† Settings UI å’Œè¯¦ç»†çš„è®¾ç½®æŒ‡å—
- æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡

**é—®é¢˜è§£å†³**:
- ä¿®å¤äº† Vercel éƒ¨ç½²çš„ ES Module é—®é¢˜
- ä¿®å¤äº† N8N API çš„æŸ¥è¯¢å‚æ•°é—®é¢˜
- ä¼˜åŒ–äº† Proxy æœåŠ¡å™¨çš„è·¯å¾„å¤„ç†

**ä¸‹ä¸€æ­¥è®¡åˆ’**:
- å¼€å§‹ Supabase é¡¹ç›®è®¾ç½®
- åˆ›å»ºæ•°æ®åº“æ¶æ„
- å®ç°ç”¨æˆ·è®¤è¯

---

### 2025-01-11

**N8N Cloud Connection å®Œæˆ**
- å®ç°äº† N8N Cloud è¿æ¥
- åˆ›å»ºäº† Vercel Serverless Proxy
- ä¿®å¤äº† CORS é—®é¢˜
- éƒ¨ç½²åˆ° Vercel æˆåŠŸ

**æŠ€æœ¯å†³ç­–**:
- ä½¿ç”¨ Vercel Serverless Functions ä½œä¸º Proxy
- è‡ªåŠ¨æ£€æµ‹ N8N Cloud åŸŸåå¹¶ä½¿ç”¨ä»£ç†
- ä¿æŒå‘åå…¼å®¹æ€§

---

## ğŸ—ï¸ æ¶æ„å†³ç­–è®°å½• (ADR)

### ADR-001: ä½¿ç”¨ Supabase ä½œä¸ºåç«¯
**æ—¥æœŸ**: 2025-01-12
**çŠ¶æ€**: âœ… å·²æ‰¹å‡†

**èƒŒæ™¯**:
- éœ€è¦æ•°æ®åº“ã€è®¤è¯ã€å­˜å‚¨åŠŸèƒ½
- å¸Œæœ›å¿«é€Ÿå¼€å‘ MVP

**å†³ç­–**:
- ä½¿ç”¨ Supabase ä½œä¸ºä¸»è¦åç«¯æœåŠ¡
- ä½¿ç”¨ Supabase MCP è¿›è¡Œæ‰€æœ‰æ•°æ®åº“æ“ä½œ
- ä½¿ç”¨ Supabase Auth è¿›è¡Œç”¨æˆ·è®¤è¯

**ç†ç”±**:
- å¼€ç®±å³ç”¨çš„åŠŸèƒ½ (Database, Auth, Storage)
- Row Level Security (RLS) æä¾›å®‰å…¨ä¿éšœ
- ä¸ Claude Code çš„ Supabase MCP å®Œç¾é›†æˆ
- å…è´¹é¢åº¦è¶³å¤Ÿ MVP ä½¿ç”¨

**å½±å“**:
- ç®€åŒ–åç«¯å¼€å‘
- æé«˜å¼€å‘é€Ÿåº¦
- æ½œåœ¨çš„ä¾›åº”å•†é”å®šé£é™©

---

### ADR-002: å‰ç«¯ä¼˜å…ˆå¼€å‘ç­–ç•¥
**æ—¥æœŸ**: 2025-01-12
**çŠ¶æ€**: âœ… å·²æ‰¹å‡†

**èƒŒæ™¯**:
- éœ€è¦å¿«é€ŸéªŒè¯ UI/UX
- å¸Œæœ›åœ¨è¿æ¥åç«¯å‰æµ‹è¯•åŠŸèƒ½

**å†³ç­–**:
- å…ˆç”¨ localStorage å®ç°æ‰€æœ‰åŠŸèƒ½
- æµ‹è¯• UI é€šè¿‡åå†è¿æ¥ Supabase
- æ¯ä¸ª Phase ç‹¬ç«‹æµ‹è¯•å’Œéƒ¨ç½²

**ç†ç”±**:
- å¿«é€ŸåŸå‹å¼€å‘
- ç‹¬ç«‹æµ‹è¯•å‰ç«¯é€»è¾‘
- é™ä½åç«¯æ›´æ”¹é£é™©
- æ›´å¥½çš„å…³æ³¨ç‚¹åˆ†ç¦»

**å½±å“**:
- éœ€è¦å†™ä¸¤æ¬¡ä»£ç  (mock + real)
- å¢åŠ åˆæœŸå¼€å‘æ—¶é—´
- ä½†é™ä½åæœŸè°ƒè¯•æ—¶é—´

---

### ADR-003: Vercel Serverless Proxy for N8N
**æ—¥æœŸ**: 2025-01-11
**çŠ¶æ€**: âœ… å·²æ‰¹å‡†

**èƒŒæ™¯**:
- N8N Cloud æœ‰ CORS é™åˆ¶
- æµè§ˆå™¨æ— æ³•ç›´æ¥è°ƒç”¨ N8N API

**å†³ç­–**:
- ä½¿ç”¨ Vercel Serverless Functions ä½œä¸ºä»£ç†
- è‡ªåŠ¨æ£€æµ‹ N8N Cloud å¹¶ä½¿ç”¨ä»£ç†
- Self-Hosted ç”¨æˆ·å¯é€‰æ‹©ä½¿ç”¨ä»£ç†

**ç†ç”±**:
- è§£å†³ CORS é—®é¢˜
- ä¿æŠ¤ API Key
- Vercel æä¾›å…è´¹é¢åº¦
- æ— éœ€é¢å¤–æœåŠ¡å™¨

**å½±å“**:
- å¢åŠ ä¸€å±‚ç½‘ç»œå»¶è¿Ÿ
- å— Vercel Serverless é™åˆ¶ (10s timeout)
- æœªæ¥å¯èƒ½éœ€è¦è¿ç§»åˆ°ä¸“ç”¨åç«¯

---

## ğŸ“¦ æ•°æ®åº“è¿ç§»å†å²

### Migration: å°šæœªåˆ›å»º
- ç­‰å¾… Phase 1 å¼€å§‹ååˆ›å»º

**è®¡åˆ’çš„è¿ç§»**:
1. `create_user_profiles_table` - ç”¨æˆ·èµ„æ–™è¡¨
2. `create_marketplace_apps_table` - å¸‚åœºåº”ç”¨è¡¨
3. `create_user_installed_apps_table` - å·²å®‰è£…åº”ç”¨è¡¨
4. `create_app_reviews_table` - åº”ç”¨è¯„ä»·è¡¨
5. `create_update_app_rating_function` - è¯„åˆ†æ›´æ–°è§¦å‘å™¨
6. `create_increment_downloads_function` - ä¸‹è½½ç»Ÿè®¡è§¦å‘å™¨

---

## ğŸ› å·²çŸ¥é—®é¢˜

### é«˜ä¼˜å…ˆçº§
- æ— 

### ä¸­ä¼˜å…ˆçº§
- N8N Workflow åˆ—è¡¨éœ€è¦åˆ†é¡µæ”¯æŒ (>50 workflows)
- éœ€è¦æ·»åŠ é”™è¯¯è¾¹ç•Œç»„ä»¶

### ä½ä¼˜å…ˆçº§
- Settings é¡µé¢å¯ä»¥ä¼˜åŒ–åŠ è½½æ€§èƒ½

---

## ğŸ“š æŠ€æœ¯æ–‡æ¡£

### ç¯å¢ƒå˜é‡

**å¿…éœ€çš„ç¯å¢ƒå˜é‡** (`.env.local`):
```bash
# Supabase (å¾…é…ç½®)
VITE_SUPABASE_URL=
VITE_SUPABASE_ANON_KEY=

# AI Providers (å¯é€‰)
VITE_OPENAI_API_KEY=
VITE_ANTHROPIC_API_KEY=

# N8N (ç”¨æˆ·è‡ªè¡Œé…ç½®)
# ä¸éœ€è¦ç¯å¢ƒå˜é‡,ç”¨æˆ·åœ¨ Settings ä¸­é…ç½®
```

### éƒ¨ç½²é…ç½®

**Vercel é…ç½®** (`vercel.json`):
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "functions": {
    "api/**/*.js": {
      "memory": 1024,
      "maxDuration": 10
    }
  }
}
```

---

## ğŸ”„ å¼€å‘å·¥ä½œæµ

### åˆ†æ”¯ç­–ç•¥
- `main` - ç”Ÿäº§ç¯å¢ƒ,ç¨³å®šç‰ˆæœ¬
- `develop` - å¼€å‘ç¯å¢ƒ,é›†æˆåˆ†æ”¯
- `feature/*` - åŠŸèƒ½åˆ†æ”¯
- `hotfix/*` - ç´§æ€¥ä¿®å¤åˆ†æ”¯

### æäº¤è§„èŒƒ
```
feat: æ–°åŠŸèƒ½
fix: Bug ä¿®å¤
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

### è‡ªåŠ¨ Git æ¨é€å·¥ä½œæµ ğŸš€

**é‡è¦**: ä¸ºäº†ä¿æŒä»£ç åŒæ­¥,Claude åœ¨æ¯æ¬¡å®Œæˆå·¥ä½œåä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œ:

1. **è‡ªåŠ¨æäº¤**:
   - å½“æ–‡ä»¶è¢«ä¿®æ”¹æˆ–æ–°å»ºå
   - ä½¿ç”¨æè¿°æ€§çš„æäº¤ä¿¡æ¯
   - åŒ…å« Claude Code ç­¾å

2. **è‡ªåŠ¨æ¨é€åˆ° GitHub**:
   ```bash
   git add .
   git commit -m "descriptive message"
   git push
   ```

3. **è§¦å‘æ¡ä»¶**:
   - åŠŸèƒ½å®Œæˆå
   - Bug ä¿®å¤å
   - æ–‡æ¡£æ›´æ–°å
   - æ„å»ºæˆåŠŸå

4. **CLAUDE.md æ›´æ–°æµç¨‹**:
   - æ¯æ¬¡é‡å¤§æ›´æ”¹åè‡ªåŠ¨æ›´æ–°å¼€å‘æ—¥å¿—
   - æ›´æ–°å·²å®ŒæˆåŠŸï¿½ï¿½åˆ—è¡¨
   - è®°å½•æŠ€æœ¯å†³ç­–å’Œé—®é¢˜è§£å†³
   - æ¨é€æ›´æ–°åˆ° GitHub

**æŒ‡ä»¤ç»™ Claude**:
```
æ¯å½“ä½ å®Œæˆä»¥ä¸‹ä»»ä½•æ“ä½œæ—¶,å¿…é¡»è‡ªåŠ¨æ¨é€åˆ° GitHub:
- ä¿®æ”¹æˆ–åˆ›å»ºä»£ç æ–‡ä»¶
- ä¿®å¤ Bug
- å®ç°æ–°åŠŸèƒ½
- æ›´æ–°æ–‡æ¡£
- æ„å»ºæˆåŠŸ

æ­¥éª¤:
1. git add . (æ·»åŠ æ‰€æœ‰æ›´æ”¹)
2. git commit -m "descriptive message" (æäº¤)
3. git push (æ¨é€åˆ° GitHub)
4. æ›´æ–° CLAUDE.md çš„å¼€å‘æ—¥å¿—
5. å†æ¬¡ commit å’Œ push CLAUDE.md
```

### Code Review æ¸…å•
- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] æ— æ˜æ˜¾æ€§èƒ½é—®é¢˜
- [ ] å®‰å…¨æ€§æ£€æŸ¥é€šè¿‡
- [ ] âœ… å·²æ¨é€åˆ° GitHub
- [ ] âœ… CLAUDE.md å·²æ›´æ–°

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### æµ‹è¯•é‡‘å­—å¡”
```
      /\
     /E2E\          <- 10%: å…³é”®ç”¨æˆ·æµç¨‹
    /------\
   /  é›†æˆ  \       <- 30%: API å’Œç»„ä»¶é›†æˆ
  /----------\
 /   å•å…ƒæµ‹è¯•  \    <- 60%: åŠŸèƒ½å’Œå·¥å…·å‡½æ•°
/--------------\
```

### å½“å‰æµ‹è¯•è¦†ç›–
- å•å…ƒæµ‹è¯•: 0% (å¾…å®æ–½)
- é›†æˆæµ‹è¯•: 0% (å¾…å®æ–½)
- E2E æµ‹è¯•: 0% (å¾…å®æ–½)

**ä¸‹ä¸€æ­¥**: åœ¨ MVP å®Œæˆåæ·»åŠ æµ‹è¯•

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å½“å‰æ€§èƒ½ (å¼€å‘ç¯å¢ƒ)
- é¦–æ¬¡åŠ è½½: ~1.5s
- TTI (Time to Interactive): ~2.0s
- Bundle å¤§å°: ~350KB (gzipped)

### æ€§èƒ½ç›®æ ‡
- é¦–æ¬¡åŠ è½½: <2s
- TTI: <3s
- Bundle å¤§å°: <500KB
- Lighthouse åˆ†æ•°: >90

---

## ğŸ” å®‰å…¨æ€§

### å®‰å…¨æªæ–½
- âœ… ä½¿ç”¨ HTTPS
- âœ… API Key å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡
- âœ… Supabase RLS ç­–ç•¥ (è®¡åˆ’ä¸­)
- â³ Content Security Policy (å¾…å®æ–½)
- â³ Rate Limiting (å¾…å®æ–½)
- â³ Input Validation (å¾…å®æ–½)

### å®‰å…¨å®¡è®¡
- æœ€åå®¡è®¡: æœªè¿›è¡Œ
- ä¸‹æ¬¡å®¡è®¡: MVP å®Œæˆå

---

## ğŸ‘¥ å›¢é˜Ÿåä½œ

### æ²Ÿé€šæ¸ é“
- é¡¹ç›®ç®¡ç†: è¿™ä¸ª CLAUDE.md æ–‡ä»¶
- ä»£ç è¯„å®¡: GitHub Pull Requests
- æŠ€æœ¯è®¨è®º: é¡¹ç›®æ–‡æ¡£å’Œä»£ç æ³¨é‡Š

### æ–‡æ¡£æ›´æ–°è§„åˆ™
1. æ¯æ¬¡é‡å¤§åŠŸèƒ½å®Œæˆåæ›´æ–°
2. æ¯æ¬¡æ¶æ„å†³ç­–åè®°å½• ADR
3. æ¯æ¬¡é‡åˆ°é‡å¤§é—®é¢˜åæ›´æ–°å·²çŸ¥é—®é¢˜
4. æ¯å¤©æ›´æ–°å¼€å‘æ—¥å¿— (å¦‚æœæœ‰è¿›å±•)
5. **æ¯æ¬¡æ›´æ–°åè‡ªåŠ¨æ¨é€åˆ° GitHub** âš¡

---

## ğŸ“‹ å¿«é€Ÿå‚è€ƒ

### å¸¸ç”¨å‘½ä»¤
```bash
# å¼€å‘
npm run dev                # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (localhost:5173)
npm run dev:proxy          # å¯åŠ¨ N8N ä»£ç†æœåŠ¡å™¨ (localhost:3001)

# æ„å»º
npm run build              # ç”Ÿäº§æ„å»º
npm run preview            # é¢„è§ˆç”Ÿäº§æ„å»º

# éƒ¨ç½²
git push origin main       # è‡ªåŠ¨éƒ¨ç½²åˆ° Vercel

# Supabase (å¾…å®‰è£…)
npm install @supabase/supabase-js
```

### é‡è¦æ–‡ä»¶ä½ç½®
- å¼€å‘è§„åˆ’: `/mvp.md`, `/midplan.md`, `/longplan.md`
- æ•°æ®åº“ç±»å‹: `/src/lib/supabase.ts`
- è·¯ç”±é…ç½®: `/src/main.tsx`
- çŠ¶æ€ç®¡ç†: `/src/store/*.ts`
- N8N é›†æˆ: `/src/n8n/*.ts`
- ä»£ç†æœåŠ¡å™¨: `/server.js`, `/api/n8n-proxy.js`

### å¿«é€Ÿé“¾æ¥
- [å¼€å‘ç¯å¢ƒ](http://localhost:5173)
- [N8N ä»£ç†](http://localhost:3001)
- [Vercel éƒ¨ç½²](https://vercel.com/dashboard)
- [Supabase Dashboard](https://app.supabase.com) (å¾…é…ç½®)

---

## ğŸ“ å­¦ä¹ èµ„æº

### é¡¹ç›®ç›¸å…³
- [React 19 æ–‡æ¡£](https://react.dev)
- [TypeScript æ–‡æ¡£](https://www.typescriptlang.org/docs)
- [Supabase æ–‡æ¡£](https://supabase.com/docs)
- [N8N æ–‡æ¡£](https://docs.n8n.io)
- [Vite æ–‡æ¡£](https://vitejs.dev)

### æœ€ä½³å®è·µ
- [React æ€§èƒ½ä¼˜åŒ–](https://react.dev/learn/render-and-commit)
- [TypeScript ç±»å‹æœ€ä½³å®è·µ](https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html)
- [Supabase RLS æŒ‡å—](https://supabase.com/docs/guides/auth/row-level-security)

---

## ğŸ’¡ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨ (æœ¬å‘¨)
1. âœ… åˆ›å»ºå¼€å‘è§„åˆ’æ–‡æ¡£ (mvp.md, midplan.md, longplan.md)
2. âœ… æ›´æ–° CLAUDE.md æ–‡æ¡£
3. â³ æ‰‹åŠ¨åˆ›å»º Supabase é¡¹ç›®
4. â³ é…ç½®ç¯å¢ƒå˜é‡
5. â³ å¼€å§‹ Phase 1.1: æ•°æ®åº“è¡¨åˆ›å»º

### çŸ­æœŸç›®æ ‡ (1-2å‘¨)
- å®Œæˆ Phase 1: Supabase åˆå§‹åŒ–
- å®Œæˆ Phase 2.1: ç”¨æˆ·è®¤è¯å‰ç«¯ (localStorage)
- å¼€å§‹ Phase 2.2: Supabase Auth é›†æˆ

### ä¸­æœŸç›®æ ‡ (3-4å‘¨)
- å®Œæˆ MVP æ‰€æœ‰åŠŸèƒ½
- éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- æ”¶é›†ç”¨æˆ·åé¦ˆ

---

## ğŸ“ è”ç³»ä¿¡æ¯

**é¡¹ç›®è´Ÿè´£äºº**: [ä½ çš„åå­—]
**æŠ€æœ¯é¡¾é—®**: Claude (AI Assistant)
**æœ€åæ›´æ–°æ—¶é—´**: 2025-01-14
**è‡ªåŠ¨åŒæ­¥**: GitHub âœ…

---

**æ›´æ–°æ­¤æ–‡æ¡£**:
- æ¯æ¬¡å®Œæˆé‡è¦åŠŸèƒ½å
- æ¯æ¬¡åšå‡ºæ¶æ„å†³ç­–å
- æ¯æ¬¡é‡åˆ°é‡å¤§é—®é¢˜å
- æ¯å¤©ç»“æŸæ—¶ (å¦‚æœæœ‰æ˜¾è‘—è¿›å±•)

**æç¤º**: ä½¿ç”¨ Git æŸ¥çœ‹æ­¤æ–‡ä»¶çš„å†å²è®°å½•æ¥è¿½è¸ªé¡¹ç›®æ¼”è¿›ã€‚
